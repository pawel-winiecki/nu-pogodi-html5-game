var NuPogodi=NuPogodi||{};!(() => {"use strict";window.onload=() => {NuPogodi.game=new Phaser.Game(960,640,Phaser.AUTO,"board",null,!0,!0),NuPogodi.game.state.add("Boot",NuPogodi.BootState),NuPogodi.game.state.add("Preload",NuPogodi.PreloadState),NuPogodi.game.state.add("Menu",NuPogodi.MenuState),NuPogodi.game.state.add("Game",NuPogodi.GameState),NuPogodi.game.state.start("Boot")}})();var NuPogodi=NuPogodi||{};NuPogodi.Bird=function(a,b){"use strict";this.route="bird-"+(a?"right":"left"),this.step=0,this.state=b},NuPogodi.Bird.prototype={move() {"use strict";this.step>0&&this.state.sprites[this.route+"-"+this.step].kill(),this.step<5?(this.step++,this.state.sprites[this.route+"-"+this.step].reset(this.state.sprites[this.route+"-"+this.step].x,this.state.sprites[this.route+"-"+this.step].y)):this.state.animations.splice(this.state.animations.indexOf(this),1)}};var NuPogodi=NuPogodi||{};NuPogodi.Egg=function(a,b,c){"use strict";this.horizontal=b,this.vertical=c,this.route="egg-"+(this.horizontal?"right":"left")+"-"+(this.vertical?"up":"down"),this.step=1,this.state=a,this.state.sprites[this.route+"-"+this.step].reset(this.state.sprites[this.route+"-"+this.step].x,this.state.sprites[this.route+"-"+this.step].y)},NuPogodi.Egg.prototype={move() {"use strict";if(this.step<5){var a=this.state.sprites[this.route+"-"+(this.step+1)];return a.alive?!1:(this.state.sprites[this.route+"-"+this.step].kill(),this.step++,a.reset(a.x,a.y),this.state.audio[this.route].play("",0,1,!1),!0)}return this.state.sprites[this.route+"-"+this.step].kill(),this.state.eggs.remove(this),this.state.wolf.getBasketPosition()===this.vertical&&this.state.wolf.getWolfPosition()===this.horizontal?(this.state.score.eggSaved(),this.state.audio.basket.play("",0,1,!1)):(this.state.score.eggBroken(),this.state.audio["egg-crash"].play("",0,1,!1),this.state.animations.push(new NuPogodi.Bird(this.horizontal,this.state))),!0}};var NuPogodi=NuPogodi||{};NuPogodi.Eggs=function(a){"use strict";this.state=a,this.length=0,this.head=null,this.nextEgg=null},NuPogodi.Eggs.prototype={add(a) {"use strict";var b={data:a,next:null};this.head?(b.next=this.head,this.head=b):(this.head=b,this.nextEgg=b),this.length++},remove(a) {"use strict";if(this.length>0){for(var b,c=this.head;c.data!==a;)b=c,c=c.next;b?b.next=c.next:this.head=c.next,c===this.nextEgg&&(this.nextEgg=c.next?c.next:this.head),this.length--}},addNewEgg() {
  "use strict";
  var a=Math.random()>.5?!0:!1;
  var b=Math.random()>.5?!0:!1;
  return this.state.sprites["egg-"+(a?"right":"left")+"-"+(b?"up":"down")+"-1"].alive?!1:(this.add(new NuPogodi.Egg(this.state,a,b)),!0)
},moveNextEgg() {
  "use strict";
  var a=!1;
  var b=this.nextEgg;
  return this.nextEgg&&(a=b.data.move(),this.length>0?this.nextEgg=b.next?b.next:this.head:this.addNewEgg()),a
},clear() {"use strict";this.head=null,this.next=null,this.length=0}};var NuPogodi=NuPogodi||{};NuPogodi.Hare=function(a){"use strict";this.state=a,this.dingCount=0,this.state.sprites.hare.reset(this.state.sprites.hare.x,this.state.sprites.hare.y),this.state.sprites["bell-"+this.dingCount].reset(this.state.sprites["bell-"+this.dingCount].x,this.state.sprites["bell-"+this.dingCount].y),this.state.isHare=!0},NuPogodi.Hare.prototype={move() {"use strict";this.state.sprites["bell-"+this.dingCount%2].kill(),this.dingCount<7?(this.dingCount++,this.state.sprites["bell-"+this.dingCount%2].reset(this.state.sprites["bell-"+this.dingCount%2].x,this.state.sprites["bell-"+this.dingCount%2].y)):this.hide()},hide() {this.state.sprites.hare.kill(),this.state.animations.splice(this.state.animations.indexOf(this),1),this.state.isHare=!1}};var NuPogodi=NuPogodi||{};NuPogodi.Score=function(a){"use strict";this.state=a,this.level=0,this.savedEggs=0,this.brokenEggs=0,this.savedText=null},NuPogodi.Score.prototype={eggSaved() {"use strict";this.savedEggs++,this.savedEggs%10||this.level++,this.savedText&&this.savedText.setText(this.savedEggs)},eggBroken() {
  "use strict";this.state.isHare?this.brokenEggs+=.5:this.brokenEggs++;
  var a;
  var b;
  var c;
  switch(this.brokenEggs){case.5:b="bird-life-1",c="bird-life-1";break;case 1:a="bird-life-1",b="bird-life-1";break;case 1.5:a="bird-life-1",b="bird-life-2",c="bird-life-2";break;case 2:a="bird-life-2",b="bird-life-2";break;case 2.5:a="bird-life-2",b="bird-life-3",c="bird-life-3";break;case 3:a="bird-life-3",b="bird-life-3";break;default:this.state.endGame()}a&&(this.state.sprites[a].animations.stop("blink","bird-life",!0),this.state.sprites[a].loadTexture("bird-life",0)),b&&this.state.sprites[b].reset(this.state.sprites[b].x,this.state.sprites[b].y),c&&(this.state.sprites[c].animations.add("blink"),this.state.sprites[c].animations.play("blink",2,!0))
},resetScore() {"use strict";this.savedEggs=0,this.brokenEggs=0,this.level=0,this.savedText.setText("0")}};var NuPogodi=NuPogodi||{};NuPogodi.Wolf=function(a,b,c){"use strict";"undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=!1),this.state=a,this.basketPosition=b,this.wolfPosition=c},NuPogodi.Wolf.prototype={render() {
  "use strict";
  var a=this.wolfPosition?"right":"left";
  var b=this.basketPosition?"up":"down";
  this.state.sprites["wolf-"+a].reset(this.state.sprites["wolf-"+a].x,this.state.sprites["wolf-"+a].y),this.state.sprites["basket-"+a+"-"+b].reset(this.state.sprites["basket-"+a+"-"+b].x,this.state.sprites["basket-"+a+"-"+b].y)
},moveWolfLeft() {"use strict";this.wolfPosition&&(this.move("wolf-right","wolf-left"),this.basketPosition?this.move("basket-right-up","basket-left-up"):this.move("basket-right-down","basket-left-down"),this.wolfPosition=!1)},moveWolfRight() {"use strict";this.wolfPosition||(this.move("wolf-left","wolf-right"),this.basketPosition?this.move("basket-left-up","basket-right-up"):this.move("basket-left-down","basket-right-down"),this.wolfPosition=!0)},moveBasketUp() {"use strict";this.basketPosition||(this.wolfPosition?this.move("basket-right-down","basket-right-up"):this.move("basket-left-down","basket-left-up"),this.basketPosition=!0)},moveBasketDown() {"use strict";this.basketPosition&&(this.wolfPosition?this.move("basket-right-up","basket-right-down"):this.move("basket-left-up","basket-left-down"),this.basketPosition=!1)},move(a, b) {"use strict";this.state.sprites[a].kill(),this.state.sprites[b].reset(this.state.sprites[b].x,this.state.sprites[b].y)},getBasketPosition() {return this.basketPosition},getWolfPosition() {return this.wolfPosition}};var NuPogodi=NuPogodi||{};NuPogodi.BootState=() => {},NuPogodi.BootState.prototype={preload() {this.game.load.image("loader-empty","./assets/sprites/loader-empty.svg"),this.game.load.image("loader-full","./assets/sprites/loader-full.svg"),this.game.load.image("logo-nerd","./assets/sprites/logo-nerd.svg")},create() {this.game.stage.scaleMode=Phaser.StageScaleMode.SHOW_ALL,this.game.stage.scale.refresh(),this.game.state.start("Preload")},update() {}};var NuPogodi=NuPogodi||{};NuPogodi.GameState=function(){"use strict";this.audio={},this.sprites={},this.animations=new Array,this.score=new NuPogodi.Score(this),this.wolf=new NuPogodi.Wolf(this),this.eggs=new NuPogodi.Eggs(this),this.newEggTimer=0,this.eggMoveTimer=0,this.animationsTimer=0,this.hareShowTimer=0,this.isHare=!1},NuPogodi.GameState.prototype={create() {
  this.eggs.clear(),this.animations=new Array;for(var a=[["wolf-left","wolf-left",390,264],["basket-left-up","basket-left-up",342,276],["basket-left-down","basket-left-down",335,347],["wolf-right","wolf-right",482,266],["basket-right-up","basket-right-up",560,280],["basket-right-down","basket-right-down",554,346],["egg-left-up-1","egg-left-1",276,246],["egg-left-up-2","egg-left-2",287,257],["egg-left-up-3","egg-left-3",307,263],["egg-left-up-4","egg-left-4",320,270],["egg-left-up-5","egg-left-5",333,288],["egg-left-down-1","egg-left-1",271,317],["egg-left-down-2","egg-left-2",286,332],["egg-left-down-3","egg-left-3",306,339],["egg-left-down-4","egg-left-4",319,350],["egg-left-down-5","egg-left-5",332,362],["egg-right-up-1","egg-right-1",676,248],["egg-right-up-2","egg-right-2",662,254],["egg-right-up-3","egg-right-3",648,262],["egg-right-up-4","egg-right-4",630,273],["egg-right-up-5","egg-right-5",616,282],["egg-right-down-1","egg-right-1",676,320],["egg-right-down-2","egg-right-2",663,332],["egg-right-down-3","egg-right-3",649,335],["egg-right-down-4","egg-right-4",632,347],["egg-right-down-5","egg-right-5",618,357],["bird-left-1","bird-left-1",328,426],["bird-left-2","bird-left-2",320,392],["bird-left-3","bird-left-3",304,414],["bird-left-4","bird-left-4",280,414],["bird-left-5","bird-left-5",252,414],["bird-right-1","bird-right-1",552,420],["bird-right-2","bird-right-2",618,394],["bird-right-3","bird-right-3",648,410],["bird-right-4","bird-right-4",666,414],["bird-right-5","bird-right-5",698,414],["bird-life-1","bird-life",600,220],["bird-life-2","bird-life",550,220],["bird-life-3","bird-life",500,220],["bell-0","bell-0",398,174],["bell-1","bell-1",398,214],["hare","hare",313,165]],b=0;b<a.length;b++)this.sprites[a[b][0]]=this.game.add.sprite(a[b][2],a[b][3],a[b][1]),this.sprites[a[b][0]].kill();for(var c=["basket","egg-crash","egg-left-up","egg-left-down","egg-right-up","egg-right-down"],b=0;b<c.length;b++)this.audio[c[b]]=this.game.add.audio(c[b]);this.score.savedText=this.game.add.text(600,180,"0",{font:"36px lets_go_digitalregular",fill:"#000000",align:"right"}),this.score.resetScore(),this.wolf.render();
  var d=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT);
  var e=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
  var f=this.game.input.keyboard.addKey(Phaser.Keyboard.UP);
  var g=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN);
  d.onDown.add(this.wolf.moveWolfLeft,this.wolf),e.onDown.add(this.wolf.moveWolfRight,this.wolf),f.onDown.add(this.wolf.moveBasketUp,this.wolf),g.onDown.add(this.wolf.moveBasketDown,this.wolf),this.game.add.button(60,472,"button-left-down",this.actionButtonLeftDown,this),this.game.add.button(60,360,"button-left-up",this.actionButtonLeftUp,this),this.game.add.button(786,472,"button-right-down",this.actionButtonRightDown,this),this.game.add.button(786,360,"button-right-up",this.actionButtonRightUp,this),this.newEggTimer=this.game.time.now+1e3,this.eggMoveTimer=this.game.time.now+1300,this.animationsTimer=this.game.time.now+2500,this.hareShowTimer=this.game.time.now+5e3
},update() {if(this.game.time.now>this.newEggTimer){
  var a=this.eggs.addNewEgg();
  var b=this.factor();
  this.newEggTimer=this.game.time.now+(1250-1250*b)+(a?this.eggs.length*(250-250*b):0)
}if(this.game.time.now>this.eggMoveTimer){console.log("saved eggs: "+this.score.savedEggs);var c=this.eggs.moveNextEgg();this.eggMoveTimer=this.game.time.now+(c?(1e3-1e3*this.factor())/this.eggs.length+1:0),console.log("saved eggs: "+this.score.savedEggs),console.log("moved: "+c)}if(this.animations.length>0&&this.game.time.now>this.animationsTimer)for(var d=0;d<this.animations.length;d++)this.animations[d].move(),this.animationsTimer=this.game.time.now+600;this.game.time.now>this.hareShowTimer&&(this.animations.push(new NuPogodi.Hare(this)),this.hareShowTimer=this.game.time.now+15e3+1e4*Math.random())},endGame() {this.game.input.keyboard.clearCaptures(),this.newEggTimer=this.game.time.now+1e4,this.eggMoveTimer=this.game.time.now+1e4,this.birdMoveTimer=this.game.time.now+1e4,NuPogodi.score=this.score.savedEggs,this.game.state.start("Menu")},actionButtonLeftDown() {this.wolf.moveWolfLeft(),this.wolf.moveBasketDown()},actionButtonLeftUp() {this.wolf.moveWolfLeft(),this.wolf.moveBasketUp()},actionButtonRightDown() {this.wolf.moveWolfRight(),this.wolf.moveBasketDown()},actionButtonRightUp() {this.wolf.moveWolfRight(),this.wolf.moveBasketUp()},factor() {return this.score.level<143?Math.log(this.score.level+1)/5:.99}};var NuPogodi=NuPogodi||{};NuPogodi.MenuState=() => {},NuPogodi.MenuState.prototype={create() {"undefined"!=typeof NuPogodi.score&&this.game.add.text(this.game.world.centerX-90,this.game.world.centerY+70,"Your score: "+NuPogodi.score,{font:"32px lets_go_digitalregular",fill:"#000000",align:"center"}),this.game.add.sprite(this.game.world.centerX-150,200,"logo-nerd"),this.game.add.text(this.game.world.centerX+30,200,"Nu Pogodi",{font:"30px lets_go_digitalregular",fill:"#000000",align:"right"});var a=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);a.onDown.add(this.beginGame,this);var b=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);b.onDown.add(this.beginGame,this),this.game.add.button(this.game.world.centerX-120,this.game.world.centerY-55,"start",this.beginGame,this),this.game.add.button(60,472,"button-left-down",this.beginGame,this),this.game.add.button(60,360,"button-left-up",this.beginGame,this),this.game.add.button(786,472,"button-right-down",this.beginGame,this),this.game.add.button(786,360,"button-right-up",this.beginGame,this)},beginGame() {this.game.input.keyboard.clearCaptures(),this.game.state.start("Game")}};var NuPogodi=NuPogodi||{};NuPogodi.PreloadState=() => {},NuPogodi.PreloadState.prototype={preload() {this.game.add.sprite(this.game.world.centerX-150,200,"logo-nerd"),this.game.add.text(this.game.world.centerX+30,200,"Nu Pogodi",{font:"30px lets_go_digitalregular",fill:"#000000",align:"right"}),this.game.add.sprite(this.game.world.centerX-101,this.game.world.centerY-8,"loader-empty"),this.loaderFull=this.game.add.sprite(this.game.world.centerX-101,this.game.world.centerY-8,"loader-full"),this.loaderFull.cropEnabled=!0,this.loaderFull.crop=new Phaser.Rectangle(0,0,0,this.loaderFull.height),this.loaderFull.name="loaderFull";for(var a=["hare","wolf-left","basket-left-up","basket-left-down","wolf-right","basket-right-up","basket-right-down","bell-0","bell-1","egg-left-1","egg-left-2","egg-left-3","egg-left-4","egg-left-5","egg-right-1","egg-right-2","egg-right-3","egg-right-4","egg-right-5","bird-left-1","bird-left-2","bird-left-3","bird-left-4","bird-left-5","bird-right-1","bird-right-2","bird-right-3","bird-right-4","bird-right-5","button-left-down","button-left-up","button-right-down","button-right-up","start"],b=0;b<a.length;b++)this.game.load.image(a[b],"./assets/sprites/"+a[b]+".svg");this.game.load.spritesheet("bird-life","./assets/sprites/bird-life.svg",27,24);for(var c=["basket","egg-crash","egg-left-up","egg-left-down","egg-right-up","egg-right-down"],b=0;b<c.length;b++)this.game.load.audio(c[b],["./assets/audio/"+c[b]+".mp3"]);this.load.onFileComplete.add(this.fileLoaded,this)},fileLoaded(a) {this.loaderFull.crop.width=2.02*a},create() {this.game.state.start("Menu")},update() {}},GameSpace={}||GameSpace,GameSpace.Sounds=() => {},GameSpace.Sounds.prototype={createGameSounds(a, b) {for(var c=0;c<b.length;c++)this[b[c]]=a.add.audio(b[c])},createSounds(a) {for(var b=0;b<a.length;b++)this[a[b]]=new Media("/android_asset/www/audio/"+a[b]+".mp3")}};